<mxfile host="app.diagrams.net" modified="2021-09-17T19:03:57.126Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36" etag="Bzcy68zCTzbnyXvkXGMk" version="15.2.9" type="github" pages="4">
  <diagram id="TTR6LDJH_ajYnn4JlRtx" name="Current">
    <mxGraphModel dx="1646" dy="1562" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="702.5" y="120.00000000000023" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-22" value="v2/accounts?application-id=" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="iPSai7FCkkQ7CAiTWd-v-12" vertex="1" connectable="0">
          <mxGeometry x="0.2167" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-9" target="iPSai7FCkkQ7CAiTWd-v-89" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="420" y="50" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-26" value="v2/accounts?application-id=" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="iPSai7FCkkQ7CAiTWd-v-24" vertex="1" connectable="0">
          <mxGeometry x="-0.203" y="3" relative="1" as="geometry">
            <mxPoint x="-3" y="46" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-9" value="Accounts" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="536" y="-50" width="88" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-27" target="iPSai7FCkkQ7CAiTWd-v-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-51" value="v2/blocks/" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="iPSai7FCkkQ7CAiTWd-v-42" vertex="1" connectable="0">
          <mxGeometry x="-0.2645" y="-4" relative="1" as="geometry">
            <mxPoint y="-14" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-27" value="Blocks" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="810" y="-60" width="88" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-28" target="iPSai7FCkkQ7CAiTWd-v-88" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="120" y="-20" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-28" value="Asset Info" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="260" y="-50" width="88" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-31" target="iPSai7FCkkQ7CAiTWd-v-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-31" target="iPSai7FCkkQ7CAiTWd-v-28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="580" y="-100" />
              <mxPoint x="304" y="-100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-31" target="iPSai7FCkkQ7CAiTWd-v-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="580" y="-100" />
              <mxPoint x="854" y="-100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-31" value="Chain&lt;br&gt;with&lt;br&gt;Index" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="530" y="-290" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-38" target="iPSai7FCkkQ7CAiTWd-v-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-38" value="Pull&lt;br&gt;Stage 1" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.extract_or_measurement;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="655" y="120" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-39" target="iPSai7FCkkQ7CAiTWd-v-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="854" y="220" />
              <mxPoint x="703" y="220" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-39" value="Watch&lt;br&gt;Stage 2" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.extract_or_measurement;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="806" y="120" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-40" value="PHP-API" style="swimlane;" parent="1" vertex="1">
          <mxGeometry x="630" y="70" width="300" height="520" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="iPSai7FCkkQ7CAiTWd-v-40" source="iPSai7FCkkQ7CAiTWd-v-43" target="iPSai7FCkkQ7CAiTWd-v-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-43" value="Broker" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="iPSai7FCkkQ7CAiTWd-v-40" vertex="1">
          <mxGeometry x="23" y="180" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-49" value="SQL" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="iPSai7FCkkQ7CAiTWd-v-40" vertex="1">
          <mxGeometry x="150" y="419" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="iPSai7FCkkQ7CAiTWd-v-40" source="iPSai7FCkkQ7CAiTWd-v-56" target="iPSai7FCkkQ7CAiTWd-v-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-56" value="Store" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.merge_or_storage;whiteSpace=wrap;" parent="iPSai7FCkkQ7CAiTWd-v-40" vertex="1">
          <mxGeometry x="25" y="324" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-54" value="Redis" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="550" y="489" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-56" target="iPSai7FCkkQ7CAiTWd-v-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-76" target="iPSai7FCkkQ7CAiTWd-v-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-76" target="iPSai7FCkkQ7CAiTWd-v-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-96" value="Adddress Data" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="iPSai7FCkkQ7CAiTWd-v-95" vertex="1" connectable="0">
          <mxGeometry x="-0.6283" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-76" value="Broker" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="400" y="250" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-43" target="iPSai7FCkkQ7CAiTWd-v-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-83" value="Go-API" style="swimlane;" parent="1" vertex="1">
          <mxGeometry x="360" y="70" width="180" height="520" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-89" value="Watch" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.extract_or_measurement;whiteSpace=wrap;" parent="iPSai7FCkkQ7CAiTWd-v-83" vertex="1">
          <mxGeometry x="42.5" y="50" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-88" value="Delete ME&lt;br&gt;Asset Info&lt;br&gt;Not needed" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-30" y="-70" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="iPSai7FCkkQ7CAiTWd-v-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="iPSai7FCkkQ7CAiTWd-v-89" target="iPSai7FCkkQ7CAiTWd-v-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="G4L9le8OE-tiCaIjhnE1" name="Solution">
    <mxGraphModel dx="1137" dy="1760" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="9FNmpddyWYxxzXF2j5aG-0" />
        <mxCell id="9FNmpddyWYxxzXF2j5aG-1" parent="9FNmpddyWYxxzXF2j5aG-0" />
        <mxCell id="NBru6ew34taAiOUr-k7r-0" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="702.5" y="120.00000000000023" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-1" value="v2/accounts?application-id=" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="NBru6ew34taAiOUr-k7r-0">
          <mxGeometry x="0.2167" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-2" value="Accounts" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="536" y="-50" width="88" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-5" target="NBru6ew34taAiOUr-k7r-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-4" value="v2/blocks/" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="NBru6ew34taAiOUr-k7r-3">
          <mxGeometry x="-0.2645" y="-4" relative="1" as="geometry">
            <mxPoint y="-14" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-5" value="Blocks" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="810" y="-60" width="88" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-7" target="NBru6ew34taAiOUr-k7r-5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="580" y="-100" />
              <mxPoint x="854" y="-100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-7" target="NBru6ew34taAiOUr-k7r-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-7" value="Chain&lt;br&gt;with&lt;br&gt;Index" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="530" y="-290" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-9" target="NBru6ew34taAiOUr-k7r-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-9" value="Pull&lt;br&gt;Watch" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.extract_or_measurement;whiteSpace=wrap;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="655" y="120" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-11" target="NBru6ew34taAiOUr-k7r-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-11" value="Pull&lt;br&gt;Watch" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.extract_or_measurement;whiteSpace=wrap;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="806" y="120" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-12" value="PHP-Workers" style="swimlane;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="630" y="70" width="430" height="1020" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-42" target="NBru6ew34taAiOUr-k7r-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-14" target="NBru6ew34taAiOUr-k7r-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-14" target="NBru6ew34taAiOUr-k7r-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-14" value="Broker/&lt;br&gt;Watcher&lt;br&gt;(sharded for scale)" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="173" y="190" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-15" value="REDIS" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="190.5" y="940" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-17" target="NBru6ew34taAiOUr-k7r-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-17" value="Store" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.merge_or_storage;whiteSpace=wrap;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="175" y="850" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-19" target="NBru6ew34taAiOUr-k7r-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-19" target="NBru6ew34taAiOUr-k7r-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-19" target="NBru6ew34taAiOUr-k7r-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-19" value="Account&lt;br&gt;Worker" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="116" y="470" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-21" target="NBru6ew34taAiOUr-k7r-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-21" target="NBru6ew34taAiOUr-k7r-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-21" target="NBru6ew34taAiOUr-k7r-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-21" value="Block&lt;br&gt;Worker" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="231" y="470" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-22" target="NBru6ew34taAiOUr-k7r-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-22" value="Order&lt;br&gt;Coroutine" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="63" y="700" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-26" target="NBru6ew34taAiOUr-k7r-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-26" value="Order&lt;br&gt;Coroutine" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="173" y="700" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-27" target="NBru6ew34taAiOUr-k7r-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-27" value="Order&lt;br&gt;Coroutine" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="283" y="700" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-42" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.flowchart.parallel_mode;pointerEvents=1" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="118.5" y="370" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="NBru6ew34taAiOUr-k7r-12" source="NBru6ew34taAiOUr-k7r-44" target="NBru6ew34taAiOUr-k7r-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-44" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.flowchart.parallel_mode;pointerEvents=1" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="234" y="370" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-49" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.flowchart.parallel_mode;pointerEvents=1" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="116" y="580" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-50" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.flowchart.parallel_mode;pointerEvents=1" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="235" y="580" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-52" value="Pub/Sub" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="NBru6ew34taAiOUr-k7r-12">
          <mxGeometry x="191" y="360" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-56" value="&lt;h1&gt;Coroutine and Pub/Sub&lt;/h1&gt;&lt;p&gt;A Coroutine is just a function that runs in it&#39;s own isolated process context. Certain threading models like PHP don&#39;t give you much control over how the thread workers fork. Any Coroutine library should make this process easier(Swoole/Coroutine).&amp;nbsp;&lt;br&gt;&lt;br&gt;Coroutines are great for a single system with many threads but does not solve for horizontal scaling. This is done via Pub/Sub&lt;br&gt;&lt;br&gt;Pub/Sub is a model where we transmit messages to unknown receivers. A form of Pub/Sub called MessageQueue is the primary use case for our services. This will be in a First In First Out pattern.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="920" y="-260" width="300" height="250" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-57" target="NBru6ew34taAiOUr-k7r-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-59" value="Chain Transaction" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="NBru6ew34taAiOUr-k7r-58">
          <mxGeometry x="-0.6911" y="3" relative="1" as="geometry">
            <mxPoint x="53" y="3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=classic;startFill=1;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-57" target="NBru6ew34taAiOUr-k7r-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-66" value="API Request/Response" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="NBru6ew34taAiOUr-k7r-62">
          <mxGeometry x="-0.0966" y="-5" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-57" value="User" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="260" y="-290" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-15" target="NBru6ew34taAiOUr-k7r-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="170" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-67" value="Cache Fetch" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="NBru6ew34taAiOUr-k7r-60">
          <mxGeometry x="0.0602" y="3" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-61" value="API GET" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="120" y="740" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=classic;startFill=1;" edge="1" parent="9FNmpddyWYxxzXF2j5aG-1" source="NBru6ew34taAiOUr-k7r-63" target="NBru6ew34taAiOUr-k7r-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-71" value="algoexplorerapi.io/v1/search/" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="NBru6ew34taAiOUr-k7r-64">
          <mxGeometry x="0.2245" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-63" value="Asset Info/&lt;br&gt;Explorer Data" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="266" y="-50" width="88" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-65" value="&lt;h1&gt;Asset Info&lt;/h1&gt;&lt;p&gt;We should not need Explorer meta data, the clients can fetch this for themselves&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="220" y="20" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-68" value="&lt;h1&gt;Workers&lt;/h1&gt;&lt;div&gt;Workers are scaleable instances that receive &quot;job data&quot; to process. These may not be necessary in the future since most of the data can be mapped and reduced for Coroutines and|or direct client retreival.&amp;nbsp;&lt;br&gt;&lt;br&gt;They should leverage their own coroutines that can be shared across the ecosystem for things like Map functions.&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="434" y="455" width="190" height="250" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-69" value="&lt;h1&gt;Coroutines&lt;/h1&gt;&lt;div&gt;Reusable bits of code that can run as an independent thread/process. These are usually calculations or map/reduce functions in order to speed up a main process that spawned them.&lt;br&gt;&lt;br&gt;These will mostly be used by the Workers and|or the Broker itself&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="1080" y="740" width="190" height="180" as="geometry" />
        </mxCell>
        <mxCell id="NBru6ew34taAiOUr-k7r-70" value="&lt;h1&gt;Brokers&lt;/h1&gt;&lt;div&gt;Filter, Massage and pass data&lt;br&gt;&lt;br&gt;Brokers are non-trivial to scale outside of sharding by key. This means they should only do the minimal amount of work to translate the incoming message to the outgoing message. This should not include any Database or Redis writes/reads. (other than inital state)&lt;br&gt;&lt;br&gt;Any process that needs to be done must be done async and in a coroutine. Most data should flow &quot;through&quot; the broker to other consumers via the Pub/Sub MQ&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="9FNmpddyWYxxzXF2j5aG-1">
          <mxGeometry x="1070" y="165" width="190" height="290" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="cD3RZK-CrP0k0jpSNUXm" name="Evils">
    <mxGraphModel dx="1990" dy="1003" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-0" />
        <mxCell id="rOHaFlbWf_gfVbxocq2r-1" parent="rOHaFlbWf_gfVbxocq2r-0" />
        <mxCell id="rOHaFlbWf_gfVbxocq2r-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="rOHaFlbWf_gfVbxocq2r-1" source="rOHaFlbWf_gfVbxocq2r-2" target="rOHaFlbWf_gfVbxocq2r-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-2" value="Thread&amp;nbsp;&lt;br&gt;Contention" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="351" y="620" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-3" value="Lock&amp;nbsp;&lt;br&gt;Contention" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="245" y="180" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-4" value="Race&amp;nbsp;&lt;br&gt;Condition" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="430" y="70" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="rOHaFlbWf_gfVbxocq2r-1" source="rOHaFlbWf_gfVbxocq2r-5" target="rOHaFlbWf_gfVbxocq2r-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-5" value="PHP Thread&lt;br&gt;Blocking IO&lt;br&gt;&lt;br&gt;100 ms" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="351" y="850" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="rOHaFlbWf_gfVbxocq2r-1" source="rOHaFlbWf_gfVbxocq2r-6" target="rOHaFlbWf_gfVbxocq2r-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-6" value="Side Effect&lt;br&gt;(get info &lt;br&gt;if not exist)&lt;br&gt;&lt;br&gt;200 ms" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="211" y="930" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="rOHaFlbWf_gfVbxocq2r-1" source="rOHaFlbWf_gfVbxocq2r-7" target="rOHaFlbWf_gfVbxocq2r-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="rOHaFlbWf_gfVbxocq2r-1" source="rOHaFlbWf_gfVbxocq2r-7" target="rOHaFlbWf_gfVbxocq2r-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="401" y="820" />
              <mxPoint x="531" y="820" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-7" value="" style="aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="387" y="750" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-10" value="2 Threads = 2 parallel Requests&lt;br&gt;3 second block = ~10-100 requests per thread&amp;nbsp;&lt;br&gt;Current requests = ~10/rps per client" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="421" y="760" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="rOHaFlbWf_gfVbxocq2r-1" source="rOHaFlbWf_gfVbxocq2r-11" target="rOHaFlbWf_gfVbxocq2r-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-13" value="Every request&lt;br&gt;spawns a thread" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rOHaFlbWf_gfVbxocq2r-12">
          <mxGeometry x="0.1579" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-11" value="" style="image;html=1;image=img/lib/clip_art/general/Earth_globe_128x128.png" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="211" y="660" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-14" value="PHP Thread&lt;br&gt;Blocking IO&lt;br&gt;&lt;br&gt;100 ms" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="481" y="850" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-18" value="&lt;h1&gt;PHP Threads&lt;/h1&gt;&lt;p&gt;Most PHP web servers spawn a thread per request. This is fine in large, highly threaded, servers that can sacrifice efficiency for raw IO/CPU power.&lt;br&gt;&lt;br&gt;It however falls apart very quickly whenever there is thread contention. In PHP, this is when the amount of requests spawn more threads than are available. This is usually due to side effects loading in an unpredictable amount of time or other undesirable evils (Lock Contention).&amp;nbsp;&lt;br&gt;&lt;br&gt;Under thread contention, threads share processes reducing their speed. This leads to an unrecoverable cascading failure which must be scaled out of.(If the problem can be scaled)&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="461" y="420" width="230" height="320" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-60" value="&lt;h1&gt;MySQL Locks&lt;/h1&gt;&lt;p&gt;Right now all requests that issue a SELECT statement will contend with the Block watcher UPDATEs/INSERTS. &lt;br&gt;&lt;br&gt;When combined with a poor threading model this leads to cascading failure. Threads wait for a table to unlock while blocking all other requests. This is compounded when you are using an index.&amp;nbsp;&lt;/p&gt;&lt;p&gt;Indicies reduce write performance increasing wait times causing more lock contention. As data grows this issue compounds and is non-trivial to solve for.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="200" y="290" width="215" height="310" as="geometry" />
        </mxCell>
        <mxCell id="rOHaFlbWf_gfVbxocq2r-61" value="&lt;h1&gt;State Management&lt;/h1&gt;&lt;p&gt;Right now we have 3 seconds to complete all business logic. Part of the state is managed via the GoAPI and must be tracked in the main API services. If any Contention and|or State Sync issues between APIs happen we enter into a race condition causing cascading failure&amp;nbsp;&lt;br&gt;&lt;br&gt;State should always live on-chain and only indexed locally with as few state flags as possible. hasOrders, isTraded, isVerified are all examples of good state to keep.&amp;nbsp;&lt;br&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="rOHaFlbWf_gfVbxocq2r-1">
          <mxGeometry x="420" y="180" width="240" height="230" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="5TUhHN9TZkv-JEZQMoDr" name="KISS">
    <mxGraphModel dx="3980" dy="905" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-0" />
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-1" parent="U2fl7s8dtTW2HTP9Zijw-0" />
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-2" value="&lt;h1&gt;Threading Solution&lt;/h1&gt;&lt;p&gt;Async Webserver with caching to reduce load on PHP. PHP will still provide cache data but the front end service will respond with the 304. This means the service will always respond, even if the API is down&amp;nbsp;&lt;br&gt;&lt;br&gt;This also means that the RPS flowing into the PHP code is minimized and PHP only has to communicate with our web servers and not the general public.&lt;br&gt;&lt;br&gt;Also advisable to leverage Swoole Coroutines and Async Server. This allows non-blocking request threads and worker threads. They can leverage stored routines.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="465" y="1150" width="220" height="320" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-4" target="U2fl7s8dtTW2HTP9Zijw-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-4" value="All Problems" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="330" y="1170" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-7" target="U2fl7s8dtTW2HTP9Zijw-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-6" value="Could be Coroutine&lt;br&gt;to reduce round trip time" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="U2fl7s8dtTW2HTP9Zijw-5">
          <mxGeometry x="0.2167" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-7" value="PHP Thread&lt;br&gt;Blocking IO&lt;br&gt;&lt;br&gt;100 ms" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="330" y="1590" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-11" target="U2fl7s8dtTW2HTP9Zijw-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-11" target="U2fl7s8dtTW2HTP9Zijw-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-10" value="API Locks the Reads" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="U2fl7s8dtTW2HTP9Zijw-9">
          <mxGeometry x="0.2727" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-11" value="Side Effect&lt;br&gt;(get info &lt;br&gt;if not exist)&lt;br&gt;&lt;br&gt;100 ms" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="190" y="1670" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-13" target="U2fl7s8dtTW2HTP9Zijw-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-13" value="" style="aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="366" y="1300" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-16" target="U2fl7s8dtTW2HTP9Zijw-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-15" value="All requests are Async" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="U2fl7s8dtTW2HTP9Zijw-14">
          <mxGeometry x="0.1579" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-16" value="" style="image;html=1;image=img/lib/clip_art/general/Earth_globe_128x128.png" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="190" y="1210" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-17" value="PHP Thread&lt;br&gt;Blocking IO&lt;br&gt;&lt;br&gt;100 ms" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="460" y="1590" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-21" target="U2fl7s8dtTW2HTP9Zijw-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-21" target="U2fl7s8dtTW2HTP9Zijw-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-20" value="Spawns blocking thread&lt;br&gt;but could be Swoole" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="U2fl7s8dtTW2HTP9Zijw-19">
          <mxGeometry x="-0.6083" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-21" value="Web Server&lt;br&gt;with Cache" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="330" y="1380" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-23" target="U2fl7s8dtTW2HTP9Zijw-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-23" value="memcache" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="245" y="1400" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-24" value="&lt;h1&gt;Locking&lt;/h1&gt;&lt;p&gt;All services should apply a lock and reduce the reliance on indices. In Aurora there are no secondary index optimizations and writes will be much slower than expected. In general an index speeds up reads but reduces writes, the write speed will degrade over time as data grows.&lt;br&gt;&lt;br&gt;Main way we solve for Read/Write contention is by creating a Read-Only Slave replica and limit writes to the Master&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="405" y="1710" width="190" height="270" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-25" value="ReadOnly" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="270" y="1820" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-27" target="U2fl7s8dtTW2HTP9Zijw-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-27" value="Master" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="270" y="1940" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-30" target="U2fl7s8dtTW2HTP9Zijw-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-29" value="Workers Lock the Master" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="U2fl7s8dtTW2HTP9Zijw-28">
          <mxGeometry x="-0.2" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-30" value="Worker&lt;br&gt;(AccountJob.php)" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="250" y="2060" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-31" value="&lt;h1&gt;Race Condition&lt;/h1&gt;&lt;p&gt;The broker must be able to put blocks in the database before a new block arrives. The problem is non-trivial to scale. We will rely on eventual consistency for now. &lt;br&gt;&lt;br&gt;We must also solve for Lock Contention or the broker will stop writing blocks because of API selects (adding to the race condition)&lt;br&gt;&lt;br&gt;The Orderbook.php Worker should be responsible for message passing and not rely on any other stateful services(or API side effects). Every side effect could end up being a race condition by blocking the thread while new data is coming in.&lt;/p&gt;&lt;p&gt;We guarantee the order of operations in the worker using Coroutines and a Pub/Sub model. Anything that can be eventually consistent will be passed to other workers (they will wait for the OB to finish and then execute their SELECT)&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="361" y="2100" width="234" height="380" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-36" target="U2fl7s8dtTW2HTP9Zijw-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-33" value="Pub/Sub" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="U2fl7s8dtTW2HTP9Zijw-32">
          <mxGeometry x="-0.2571" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-36" target="U2fl7s8dtTW2HTP9Zijw-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="2260" />
              <mxPoint x="230" y="1970" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-35" value="Broker Locks the Master" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="U2fl7s8dtTW2HTP9Zijw-34">
          <mxGeometry x="0.1347" y="3" relative="1" as="geometry">
            <mxPoint x="-32" y="109" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-36" value="Broker&lt;br&gt;(Orderbook.php)" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="250" y="2210" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="U2fl7s8dtTW2HTP9Zijw-1" source="U2fl7s8dtTW2HTP9Zijw-38" target="U2fl7s8dtTW2HTP9Zijw-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="U2fl7s8dtTW2HTP9Zijw-38" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#FF9900;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.blockchain_resource;direction=south;" vertex="1" parent="U2fl7s8dtTW2HTP9Zijw-1">
          <mxGeometry x="288.5" y="2352.5" width="23" height="78" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
